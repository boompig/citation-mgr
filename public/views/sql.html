<div class="container">
    <h3 class="subpage-title">Arbitrary SQL Execution</h3>
    <h4 class="subpage-title">Be careful!</h4>

    <form class="query-form" ng-submit="runQuery($event)">
        <label for="query">SQL Query</label>
        <textarea class="form-control" rows="3" name="query" ng-model="queryData.sql" required="required">
        </textarea>

        <button class="btn btn-primary form-control" type="submit">Run Query</button>
    </form>

    <div ng-if="errorMsg" class="query-msg error">{{ errorMsg }}</div>

    <div ng-if="lastResultStatus">
        <h3 class="subpage-title">Results</h3>

        <h4 class="emptyTableMsg" ng-if="resultList.length == 0">No results</h4>

        <table class="table table-striped table-condensed" ng-if="resultList.length">
            <thead>
                <tr>
                    <th ng-repeat="heading in getResultHeadings()">{{ heading }}</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="resultItem in resultList">
                    <td ng-repeat="heading in getResultHeadings()">{{ resultItem[heading] }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
